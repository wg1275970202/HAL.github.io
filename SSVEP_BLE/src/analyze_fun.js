const _0x80a98=_0x1a9c;function _0x21b3(){const _0x308ae6=['reduce','I_magnitudes\x20和\x20Image_logic\x20数组长度不相同','left',',\x20-10)','#spectrumSVG','Amplitude(V)','1637576KfNLih','append','range','attr','#EEG_BandSVG','y\x20axis-label','transform','44706708gfquUh','selectAll','5EbbTpZ','font-size','toFixed','text-anchor','filter','stroke-width','351114wbiiqh','Magnitude(V)','domain','class','739868EJWbEK','flat','from','Time\x20(s)','width','\x20Hz','ceil','map','x\x20axis-label','#333','height','sqrt','θ\x20/\x20α','magnitudes','middle','blue','text','(θ\x20+\x20α)\x20/\x20β','axisLeft','forEach','length','(θ\x20+\x20α\x20+\x20β)','axisBottom','push','SNR','call','extractedData\x20Length=','log',')\x20rotate(-90)','select','Band','EEG_Band','none','fill','bottom','6900572TbsGML','scaleLinear','right','1408956qxHgew','α\x20/\x20β','(θ\x20+\x20α)','cos','frequencies','min','includes','sin','translate(-45,\x20','15wTEaog','Spectrum','translate(','max','value','tickFormat','9326574mFtUoh','Frequency\x20(Hz)','remove','top'];_0x21b3=function(){return _0x308ae6;};return _0x21b3();}(function(_0x1b4457,_0x32d432){const _0x541e54=_0x1a9c,_0xfcc76a=_0x1b4457();while(!![]){try{const _0x15120d=-parseInt(_0x541e54(0x112))/0x1+parseInt(_0x541e54(0x160))/0x2*(-parseInt(_0x541e54(0x141))/0x3)+parseInt(_0x541e54(0x138))/0x4*(parseInt(_0x541e54(0x15a))/0x5)+-parseInt(_0x541e54(0x147))/0x6+-parseInt(_0x541e54(0x135))/0x7+-parseInt(_0x541e54(0x151))/0x8+parseInt(_0x541e54(0x158))/0x9;if(_0x15120d===_0x32d432)break;else _0xfcc76a['push'](_0xfcc76a['shift']());}catch(_0x5cd261){_0xfcc76a['push'](_0xfcc76a['shift']());}}}(_0x21b3,0xe9a94));const waveformSVG=d3[_0x80a98(0x12f)]('#waveformSVG'),spectrumSVG=d3[_0x80a98(0x12f)](_0x80a98(0x14f)),EEG_BandSVG=d3['select'](_0x80a98(0x155));function _0x1a9c(_0x55cd30,_0x44d23a){const _0x21b3e5=_0x21b3();return _0x1a9c=function(_0x1a9c32,_0x3ab259){_0x1a9c32=_0x1a9c32-0x10f;let _0xab7d0=_0x21b3e5[_0x1a9c32];return _0xab7d0;},_0x1a9c(_0x55cd30,_0x44d23a);}function analyzeData(){const _0x907619=_0x80a98,_0x1e1544=parseFloat(F1Input[_0x907619(0x145)]),_0x52222e=parseFloat(dfInput[_0x907619(0x145)]),_0x3b144c=0x3e8,{eegData:_0x13f9ed,newTimestamps:_0x4eb7a0}=getSampledData();console[_0x907619(0x12d)](_0x907619(0x12c)+_0x13f9ed[_0x907619(0x126)]);const _0xdcb794=generateFrequencies(0x3,0x28,_0x52222e),_0x42137e=computeMagnitudes(_0x13f9ed,_0x3b144c,_0xdcb794),_0x532f25=_0xdac938=>''+_0xdac938[_0x907619(0x15c)](0x2);plot_(_0x4eb7a0,_0x13f9ed,waveformSVG,_0x532f25,'Waveform',_0x907619(0x115),_0x907619(0x150));const _0x33a9c2=_0x527534=>_0x527534[_0x907619(0x15c)](0x0)+_0x907619(0x117);plot_(_0xdcb794,_0x42137e,spectrumSVG,_0x33a9c2,_0x907619(0x142),_0x907619(0x148),_0x907619(0x10f));let _0x50df32=Indicators_fun(_0x13f9ed,_0x3b144c,_0x1e1544,_0x52222e,Image_logic);console[_0x907619(0x12d)](_0x50df32);const _0x20ce30=['θ','α','β',_0x907619(0x11e),'θ\x20/\x20β',_0x907619(0x139),_0x907619(0x123),_0x907619(0x13a),_0x907619(0x127),'MI',_0x907619(0x12a)];let _0x25c92d=Indicators_fun(_0x13f9ed,_0x3b144c,_0x1e1544,_0x52222e,Image_logic);_0x25c92d[0x9]=_0x25c92d[0x9]/0x64;const _0x217f91=_0x1431e8=>''+_0x20ce30[_0x1431e8-0x1];let _0x368f68=Array(0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa,0xb);plot_(_0x368f68,_0x25c92d,EEG_BandSVG,_0x217f91,_0x907619(0x131),_0x907619(0x130),'Magnitude');}function getSampledData(){const _0x46c11b=_0x80a98;let _0x57178e=dataArray_ADC[_0x46c11b(0x113)](),_0xf3354f=dataArray_marker[_0x46c11b(0x113)](),_0x3f7626=0x3e8,_0x3a4f81=[],_0x57f3f3=-0x1;for(let _0x4686d4=0x0;_0x4686d4<_0xf3354f[_0x46c11b(0x126)];_0x4686d4++){if(_0xf3354f[_0x4686d4]===0x1){if(_0x57f3f3===-0x1)_0x57f3f3=_0x4686d4;else{const _0x4cd09e=_0x4686d4,_0x18bee1=_0x57178e['slice'](_0x57f3f3,_0x4cd09e);_0x3a4f81['push'](_0x18bee1),_0x57f3f3=-0x1;}}}const _0x3cdca8=_0x3a4f81[_0x46c11b(0x113)](),_0x127e82=[],_0x2cf64f=0x1/_0x3f7626;for(let _0x5b6fc1=0x0;_0x5b6fc1<_0x3cdca8['length'];_0x5b6fc1++){_0x127e82[_0x46c11b(0x129)](_0x5b6fc1*_0x2cf64f);}const _0xe24870=_0x3cdca8[_0x46c11b(0x119)](_0x59d01c=>_0x59d01c/0xfff*3.3);return{'eegData':_0xe24870,'newTimestamps':_0x127e82};}function generateFrequencies(_0x21360c,_0x1d200f,_0x6a57e8){const _0x3b83cf=_0x80a98,_0x532d28=Math[_0x3b83cf(0x118)]((_0x1d200f-_0x21360c)/_0x6a57e8)+0x1;return Array[_0x3b83cf(0x114)]({'length':_0x532d28},(_0x327597,_0x454658)=>_0x21360c+_0x454658*_0x6a57e8);}function computeMagnitudes(_0x53a84d,_0x6a710,_0xe8388f){const _0x49d71e=_0x80a98,_0x13ee57=_0x53a84d[_0x49d71e(0x126)],_0x4603ea=_0xe8388f[_0x49d71e(0x119)](_0x15ad43=>{const _0xacfc4e=_0x49d71e;let _0x3d3875=0x0,_0x886ef9=0x0;for(let _0x217c2a=0x0;_0x217c2a<_0x13ee57;_0x217c2a++){const _0x4e665b=0x2*Math['PI']*_0x15ad43*_0x217c2a/_0x6a710;_0x3d3875+=_0x53a84d[_0x217c2a]*Math[_0xacfc4e(0x13b)](_0x4e665b),_0x886ef9-=_0x53a84d[_0x217c2a]*Math[_0xacfc4e(0x13f)](_0x4e665b);}let _0x301d4a=Math[_0xacfc4e(0x11d)](_0x3d3875**0x2+_0x886ef9**0x2)/_0x13ee57;return _0x15ad43>0x0&&_0x15ad43<_0x6a710/0x2&&(_0x301d4a*=0x2),_0x301d4a;});return _0x4603ea;}function Indicators_fun(_0x4e9b1f,_0x11efe9,_0x338442,_0x40a80f,_0x28d9b0){const _0x1daed4=_0x80a98,_0x373406=generateFrequencies(0x4,0x3c,0.1),_0x3ca74e=computeMagnitudes(_0x4e9b1f,_0x11efe9,_0x373406),_0x406c59=Array[_0x1daed4(0x114)]({'length':0x64},(_0xd22512,_0xf77e58)=>_0x338442+_0xf77e58*_0x40a80f),_0xca1831=_0x406c59[_0x1daed4(0x15e)]((_0xc259c,_0x2ddef7)=>_0x28d9b0[_0x2ddef7]),_0xabd2d3=_0x373406[_0x1daed4(0x14b)]((_0x363440,_0x49d246,_0x4fc56b)=>{const _0x21b078=_0x1daed4;return!_0xca1831[_0x21b078(0x13e)](_0x49d246)&&(_0x363440[_0x21b078(0x13c)][_0x21b078(0x129)](_0x49d246),_0x363440[_0x21b078(0x11f)][_0x21b078(0x129)](_0x3ca74e[_0x4fc56b])),_0x363440;},{'frequencies':[],'magnitudes':[]}),{frequencies:_0x1e9835,magnitudes:_0x3b5173}=_0xabd2d3;let _0x5eb946=0x0,_0x1292bf=0x0,_0x2e815f=0x0,_0xacc63=0x0;_0x1e9835[_0x1daed4(0x125)]((_0x57342d,_0x20c564)=>{const _0x4f4544=_0x3b5173[_0x20c564];_0xacc63+=_0x4f4544;if(_0x57342d>=0x4&&_0x57342d<0x8)_0x5eb946+=_0x4f4544;else{if(_0x57342d>=0x8&&_0x57342d<0xc)_0x1292bf+=_0x4f4544;else _0x57342d>=0xc&&_0x57342d<=0x1e&&(_0x2e815f+=_0x4f4544);}});if(_0xacc63===0x0)return{'thetaRatio':0x0,'alphaRatio':0x0,'betaRatio':0x0};const _0x44a2fb=_0x5eb946/_0xacc63,_0xc85fc8=_0x1292bf/_0xacc63,_0x47a0b0=_0x2e815f/_0xacc63,_0x4efe2a=_0xc85fc8===0x0?Infinity:_0x44a2fb/_0xc85fc8,_0x559078=_0x47a0b0===0x0?Infinity:_0x44a2fb/_0x47a0b0,_0x2c5bae=_0x47a0b0===0x0?Infinity:_0xc85fc8/_0x47a0b0,_0x12c5ef=_0x47a0b0===0x0?Infinity:(_0x44a2fb+_0xc85fc8)/_0x47a0b0,_0x35a0c0=_0x44a2fb+_0xc85fc8,_0x20999f=_0x44a2fb+_0xc85fc8+_0x47a0b0,_0x3b52fe=computeMagnitudes(_0x4e9b1f,_0x11efe9,_0x406c59),_0x88c98c=Math[_0x1daed4(0x144)](..._0x3b52fe)+Math[_0x1daed4(0x13d)](..._0x3b52fe)/0x2,_0xa8a777=_0x3b52fe[_0x1daed4(0x119)](_0x391940=>_0x391940>_0x88c98c),_0x1c7e60=_0xa8a777[_0x1daed4(0x14b)]((_0x459490,_0x216d56,_0x2b0ef3)=>_0x216d56===_0x28d9b0[_0x2b0ef3]?_0x459490+0x1:_0x459490,0x0),_0x5b1158=bitsTransmitted(_0x1c7e60,_0xa8a777[_0x1daed4(0x126)]),_0x3cf100=calculateSNR(_0x3b52fe,_0x28d9b0);return[_0x44a2fb,_0xc85fc8,_0x47a0b0,_0x4efe2a,_0x559078,_0x2c5bae,_0x12c5ef,_0x35a0c0,_0x20999f,_0x5b1158,_0x3cf100];}function bitsTransmitted(_0x4197be,_0x59d07e){const _0x1c4ac0=_0x80a98,_0x55feaa=_0x4197be/_0x59d07e,_0x5830ad=[[(0x1-_0x55feaa)/0x2,_0x55feaa/0x2],[_0x55feaa/0x2,(0x1-_0x55feaa)/0x2]],_0x2b2499=[_0x5830ad[0x0][0x0]+_0x5830ad[0x0][0x1],_0x5830ad[0x1][0x0]+_0x5830ad[0x1][0x1]],_0x1b230c=[_0x5830ad[0x0][0x0]+_0x5830ad[0x1][0x0],_0x5830ad[0x0][0x1]+_0x5830ad[0x1][0x1]],_0x762d73=_0x53f90f=>Math['log2'](_0x53f90f>0x0?_0x53f90f:1e-10),_0x1660f1=-_0x2b2499[_0x1c4ac0(0x14b)]((_0x42e72b,_0x4cd6b8)=>_0x42e72b+_0x4cd6b8*_0x762d73(_0x4cd6b8),0x0),_0x17b44e=-_0x1b230c[_0x1c4ac0(0x14b)]((_0x24bfe5,_0x4cb2f3)=>_0x24bfe5+_0x4cb2f3*_0x762d73(_0x4cb2f3),0x0),_0x4bde16=-_0x5830ad[_0x1c4ac0(0x113)]()[_0x1c4ac0(0x14b)]((_0x2b72cd,_0x3f2d89)=>_0x2b72cd+_0x3f2d89*_0x762d73(_0x3f2d89),0x0),_0x1d6804=_0x59d07e*(_0x1660f1+_0x17b44e-_0x4bde16);return _0x1d6804;}function calculateSNR(_0x219a41,_0x31e366){const _0x45d49d=_0x80a98;if(_0x219a41[_0x45d49d(0x126)]!==_0x31e366[_0x45d49d(0x126)])throw new Error(_0x45d49d(0x14c));const _0x5d3466=_0x219a41[_0x45d49d(0x14b)]((_0x270c33,_0x544c57,_0x1bdae1)=>{return _0x31e366[_0x1bdae1]===!![]?_0x270c33+_0x544c57**0x2:_0x270c33;},0x0),_0xacff2d=_0x219a41[_0x45d49d(0x14b)]((_0x40a075,_0x181517,_0x14f485)=>{return _0x31e366[_0x14f485]===![]?_0x40a075+_0x181517**0x2:_0x40a075;},0x0),_0x30e829=_0xacff2d===0x0?Infinity:_0x5d3466/_0xacff2d;return _0x30e829;}function plot_(_0x30556e,_0x2f6d80,_0x50ab2a,_0x5d1c06,_0x15c14d,_0x2c92bf,_0x2b3c4e){const _0x42bf31=_0x80a98,_0x41137e=+_0x50ab2a[_0x42bf31(0x154)](_0x42bf31(0x116)),_0x258434=+_0x50ab2a[_0x42bf31(0x154)](_0x42bf31(0x11c)),_0x3283d0={'top':0x28,'right':0x14,'bottom':0x32,'left':0x46},_0x267f44=_0x41137e-_0x3283d0[_0x42bf31(0x14d)]-_0x3283d0[_0x42bf31(0x137)],_0x16bc23=_0x258434-_0x3283d0[_0x42bf31(0x14a)]-_0x3283d0[_0x42bf31(0x134)],_0x3f3096=d3[_0x42bf31(0x136)]()[_0x42bf31(0x110)]([d3[_0x42bf31(0x13d)](_0x30556e),d3['max'](_0x30556e)])[_0x42bf31(0x153)]([0x0,_0x267f44]),_0x11110f=d3[_0x42bf31(0x136)]()[_0x42bf31(0x110)]([d3[_0x42bf31(0x13d)](_0x2f6d80),d3[_0x42bf31(0x144)](_0x2f6d80)])[_0x42bf31(0x153)]([_0x16bc23,0x0]);_0x50ab2a[_0x42bf31(0x159)]('*')[_0x42bf31(0x149)]();const _0x245457=_0x50ab2a[_0x42bf31(0x152)]('g')[_0x42bf31(0x154)](_0x42bf31(0x157),_0x42bf31(0x143)+_0x3283d0[_0x42bf31(0x14d)]+',\x20'+_0x3283d0[_0x42bf31(0x14a)]+')'),_0x2664c6=d3[_0x42bf31(0x128)](_0x3f3096)[_0x42bf31(0x146)](_0x5d1c06);_0x245457['append']('g')[_0x42bf31(0x12b)](_0x2664c6)['attr'](_0x42bf31(0x157),'translate(0,\x20'+_0x16bc23+')');const _0x53ccbf=d3[_0x42bf31(0x124)](_0x11110f);_0x245457[_0x42bf31(0x152)]('g')[_0x42bf31(0x12b)](_0x53ccbf);const _0x5f009c=d3['line']()['x'](_0x4c6790=>_0x3f3096(_0x4c6790[0x0]))['y'](_0x3261f1=>_0x11110f(_0x3261f1[0x1])),_0x3ea29b=_0x30556e[_0x42bf31(0x119)]((_0xaea1ad,_0x3e98e7)=>[_0xaea1ad,_0x2f6d80[_0x3e98e7]]);if(_0x3ea29b['length']===0x0)return;_0x245457[_0x42bf31(0x152)]('path')['datum'](_0x3ea29b)[_0x42bf31(0x154)]('d',_0x5f009c)[_0x42bf31(0x154)](_0x42bf31(0x133),_0x42bf31(0x132))[_0x42bf31(0x154)]('stroke',_0x42bf31(0x121))[_0x42bf31(0x154)](_0x42bf31(0x15f),0x2),_0x245457['append'](_0x42bf31(0x122))[_0x42bf31(0x122)](_0x15c14d)[_0x42bf31(0x154)](_0x42bf31(0x15b),'1.5em')[_0x42bf31(0x154)](_0x42bf31(0x157),_0x42bf31(0x143)+_0x267f44/0x2+_0x42bf31(0x14e))[_0x42bf31(0x154)](_0x42bf31(0x15d),_0x42bf31(0x120))[_0x42bf31(0x154)](_0x42bf31(0x133),_0x42bf31(0x11b)),_0x245457[_0x42bf31(0x152)](_0x42bf31(0x122))['attr'](_0x42bf31(0x111),_0x42bf31(0x11a))[_0x42bf31(0x154)](_0x42bf31(0x15d),_0x42bf31(0x120))['attr'](_0x42bf31(0x157),_0x42bf31(0x143)+_0x267f44/0x2+',\x20'+(_0x16bc23+0x23)+')')[_0x42bf31(0x122)](_0x2c92bf)[_0x42bf31(0x154)](_0x42bf31(0x133),_0x42bf31(0x11b)),_0x245457[_0x42bf31(0x152)](_0x42bf31(0x122))[_0x42bf31(0x154)](_0x42bf31(0x111),_0x42bf31(0x156))['attr'](_0x42bf31(0x15d),_0x42bf31(0x120))[_0x42bf31(0x154)](_0x42bf31(0x157),_0x42bf31(0x140)+_0x16bc23/0x2+_0x42bf31(0x12e))['text'](_0x2b3c4e)['attr'](_0x42bf31(0x133),_0x42bf31(0x11b));}